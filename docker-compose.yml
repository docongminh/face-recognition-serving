version: '3'
services:
  tf-serving:
    image: tensorflow/serving:latest
    restart: always
    ports:
      - '8501:8501'
    volumes:
      - './serving:/models'
      - './serving/models.conf:/models/models.conf'
    command:
      - '--model_config_file=/models/models.conf'
      - '--model_config_file_poll_wait_seconds=60'
  
  server:
    image: cristiando0902/tensorflow:1.14.0-py3
    restart: always
    volumes:
      - './:/env'
    command: bash /env/run.sh